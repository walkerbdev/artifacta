// Visualization and Chart Styles

// Flexible Visualization Grid - vertical stack of rows
.viz-viz-grid {
  display: flex;
  flex-direction: column;
  gap: 3rem;
  padding: 50px;
  background: white;
  align-items: center;
  justify-content: flex-start;
  position: relative;
  min-height: 100%;
}

// Visualizations Row - horizontal grouping of components
.viz-viz-row {
  display: flex;
  gap: 2rem;
  justify-content: center;
  align-items: center;
  flex-wrap: wrap;
  background: white;

  .viz-viz-container {
    flex: 1;
    background: white;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: fit-content; // Prevent shrinking below content size

    h4 {
      font-size: 1.2rem;
      font-weight: 700;
      color: #333;
      margin-bottom: 1.5rem;
    }

    // Legend should always be horizontal
    .viz-legend-inline {
      display: flex;
      flex-direction: row;
      gap: 1rem;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 1rem;

      .viz-legend-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }
    }

    .viz-canvas,
    .viz-canvas-3d {
      width: 400px;
      height: 400px;
      border-radius: 12px;
      border: 2px solid #e0e0e0;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      background: white;
    }
  }

  // When in drag mode, make canvases responsive to container size
  .viz-draggable-viz.drag-enabled {
    // Make all canvases responsive to their container in drag mode
    .viz-canvas,
    .viz-canvas-3d,
    .viz-canvas-confusion,
    .viz-canvas-roc,
    .viz-canvas-pr {
      width: 100%;
      height: auto;
      max-width: 100%;
      aspect-ratio: 1; // Keep square for square canvases
    }

    // Keep legend horizontal
    .viz-legend-inline {
      display: flex;
      flex-direction: row;
      gap: 1rem;
      justify-content: center;
      flex-wrap: wrap;
    }
  }
}

// Loss History Row
.viz-loss-history-row {
  width: 100%;
  padding: 2rem;
  background: white;
  display: flex;
  justify-content: center;
  gap: 2rem;
  flex-wrap: wrap;

  .viz-viz-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: fit-content; // Prevent shrinking below content size

    h4 {
      font-size: 1.2rem;
      font-weight: 700;
      color: #333;
      margin-bottom: 1.5rem;
    }

    .viz-canvas-loss-history,
    .viz-canvas-parallel-coordinates,
    .viz-canvas-parameter-importance,
    .viz-canvas-distribution,
    .viz-canvas-comparison-scatter {
      width: 600px;
      height: 300px;
      border-radius: 12px;
      border: 2px solid #e0e0e0;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      background: white;
    }

    .viz-canvas-confusion,
    .viz-canvas-roc,
    .viz-canvas-pr {
      width: 350px;
      height: 350px;
      border-radius: 12px;
      border: 2px solid #e0e0e0;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      background: white;
    }
  }
}

// Default canvas sizes (when not in specific layout contexts)
// These apply to canvases in DraggableVisualization wrappers before drag-enabled mode
.viz-canvas-confusion,
.viz-canvas-roc,
.viz-canvas-pr {
  width: 100%;
  height: 100%;
  border-radius: 12px;
  border: 2px solid #e0e0e0;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  background: white;
}

// Override for heatmap natural size (don't stretch)
.viz-canvas-confusion.heatmap-natural-size {
  width: auto !important;
  height: auto !important;
  max-width: none !important;
  aspect-ratio: auto !important;
}

// Also override in drag mode
.viz-draggable-viz.drag-enabled .viz-canvas-confusion.heatmap-natural-size {
  width: auto !important;
  height: auto !important;
  max-width: none !important;
  aspect-ratio: auto !important;
}

.viz-canvas-parallel-coordinates,
.viz-canvas-parameter-importance,
.viz-canvas-distribution,
.viz-canvas-comparison-scatter,
.viz-canvas-barchart {
  width: 600px;
  height: 300px;
  margin-top: 16px;
  border-radius: 12px;
  border: 2px solid #e0e0e0;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  background: white;
}

.viz-canvas-loss-history {
  width: 600px;
  height: 300px;
  border-radius: 12px;
  border: 2px solid #e0e0e0;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  background: white;
}

.viz-canvas-scatter {
  border-radius: 12px;
  border: 2px solid #e0e0e0;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  background: white;
}
